<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="pt-br">
<head>
   <meta charset="UTF-8">
   <meta name="viewport" content="width=device-width, initial-scale=1.0">
   <title>Brinquedo História</title>
   <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-4Q6Gf2aSP4eDXB8Miphtr37CMZZQ5oXLH2yaXMJ2w8e2ZtHTl7GptT4jmndRuHDT" crossorigin="anonymous">
   <link rel="stylesheet" th:href="@{/css/style.css}">
</head>
<body>
    <header>
        <h1 id="nome-loja">Brinquedo História</h1>
    </header>

    <div class="sidebar">
        <img th:src="@{/imagens/logo.jpg}" width="302" height="125" alt="Logo da Loja de Brinquedos">
        <h1 id="titulo-menu">Menu Principal</h1>
        <a th:href="@{/home}" class="menu-item">Home</a>
        <a th:href="@{/catalogo}" class="menu-item">Catálogo de Brinquedos</a>
        <a th:href="@{/adm}" class="menu-item">Administração</a>
        <a th:href="@{/sobre}" class="menu-item">Sobre a equipe</a>
    </div>
	<div class="main-content">
	    <div class="destaque">
	        <h1 class="titulo-destaque" th:text="${brinquedo.id} != null ? 'Editar Brinquedo' : 'Novo Brinquedo'"></h1>
	    </div>
	
	    <form th:action="@{/brinquedos/salvar}" th:object="${brinquedo}" method="post" enctype="multipart/form-data">
	        <table>
				<tr>
				    <th>CÓDIGO:</th>
				    <td>
				        <input type="text" th:field="*{codigo}" size="40" 
				               readonly="readonly" />
				    </td>
				</tr>
	            <tr>
	                <th>NOME:</th>
	                <td><input type="text" th:field="*{descricao}" size="40" /></td>
	            </tr>
				<tr>
					<th>CATEGORIA:</th>
					<td><select th:field="*{categoria}" size="1">
							<option th:value="*{categoria}" th:text="*{categoria}"></option>
							<option th:value="Pelucia" th:text="Pelúcia"></option>
							<option th:value="QuebraCabecas" th:text="Quebra-Cabeças"></option>
							<option th:value="HotWheels" th:text="Hot Wheels"></option>
						</select>
				</tr>
	            <tr>
	                <th>MARCA:</th>
	                <td><input type="text" th:field="*{marca}" size="40" /></td>
	            </tr>
	            <tr>
	                <th>IMAGEM:</th>
	                <td>
	                    <input type="text" th:field="*{imagem}" size="30" placeholder="Nome do arquivo" readonly />
	                    <input type="file" accept="image/*" onchange="mostrarPreview(event)" />
	                </td>
	            </tr>
	            <tr>
	                <th>PRÉVIA:</th>
	                <td><img id="preview" src="#" alt="Prévia da imagem" style="display:none; max-width: 200px;" /></td>
	            </tr>
	            <tr>
	                <th>VALOR:</th>
	                <td><input type="text" th:field="*{valor}" size="40" /></td>
	            </tr>
				<tr>
				  <th>DETALHES:</th>
				  <td>
				    <textarea th:field="*{detalhes}" rows="4" cols="40"></textarea>
				  </td>
				</tr>
	        </table>
	        <input type="submit" value="SALVAR DADOS" />
	    </form>
	
	    <script>
	        function mostrarPreview(event) {
	            const arquivo = event.target.files[0];
	            if (arquivo) {
	                const leitor = new FileReader();
	                leitor.onload = function(e) {
	                    const img = document.getElementById('preview');
	                    img.src = e.target.result;
	                    img.style.display = 'block';
	                    const campoTexto = document.querySelector('input[th\\:field="*{imagem}"]');
	                    if (campoTexto) {
	                        campoTexto.value = arquivo.name;
	                    }
	                };
	                leitor.readAsDataURL(arquivo);
	            }
	        }
	    </script>
	</div>
</body>
</html>
